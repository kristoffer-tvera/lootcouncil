@page
@model Lootcouncil.Pages.Council.NewModel
@{
}

<ol>
    @if (Model.Instance == null)
    {
        <li>Start by picking a instance <a asp-area="" asp-page="/Setup/Expansion">here</a>.</li>
    }
    else
    {
        <li><s>Start by picking a instance <a asp-area="" asp-page="/Setup/Expansion">here</a>.</s></li>
    }
    <li>Pick the characters that are expected to be part of this council</li>
</ol>



@if (Model.Instance != null)
{
    <hr />
    <h3>@Model.Instance.Name</h3>
}


@if (Model.Members != null)
{
    <hr />

    <p>Pick members. Use the slider below to automatically pick groups of members based on guild-rank.</p>

    <p>
        <input class="mdl-slider mdl-js-slider" type="range" min="0" max="10" value="@Model.DefaultMemberRankIncluded" step="1" tabindex="0" data-rank-slider>
    </p>
    <p>Current filter: <span data-rank-current>@Model.DefaultMemberRankIncluded</span></p>
    <ul class="demo-list-control mdl-list">
        @foreach (var member in Model.Members.OrderBy(m => m.Rank))
        {
            <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                    <i class="material-icons  mdl-list__item-avatar">person</i>
                    @member.Character.Name (@member.Rank)
                </span>
                <span class="mdl-list__item-secondary-action">
                    <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="character-@(member.Character.Id)">
                        <input type="checkbox" id="character-@(member.Character.Id)" class="mdl-checkbox__input" data-rank="member.Rank" @(member.Rank >= Model.DefaultMemberRankIncluded ? "" : "checked") />
                    </label>
                </span>
            </li>
        }
    </ul>
}

<script>
    var slider = document.querySelector('[data-rank-slider]');
    if (slider) {
        slider.addEventListener('change', function (e) { console.log('x') });
        // read slider value, queryselectorall on value
    }
</script>